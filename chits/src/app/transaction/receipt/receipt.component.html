<main id="main" class="main">
    <div class="pagetitle">
        <h1>Receipt</h1>
        <nav>
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a routerLink="/">Home</a></li>
                <li class="breadcrumb-item">Transaction</li>
                <li class="breadcrumb-item active">Receipt</li>
            </ol>
        </nav>
    </div>
    <section class="section">
        <div class="row">


            <div class="card">
                <div class="card-body">
                    <h5 class="card-title"></h5>
                    <ul class="nav nav-tabs nav-tabs-bordered d-flex" id="borderedTabJustified" role="tablist">
                        <li class="nav-item flex-fill" role="presentation"> <button class="nav-link w-100 active" id="home-tab" data-bs-toggle="tab" data-bs-target="#bordered-justified-home" type="button" role="tab" aria-controls="customerlist" aria-selected="true">Receipt List</button></li>
                        <li class="nav-item flex-fill" role="presentation"> <button class="nav-link w-100" id="profile-tab" data-bs-toggle="tab" data-bs-target="#bordered-justified-profile" type="button" role="tab" aria-controls="customercreation" aria-selected="false">Receipt Creation</button></li>


                    </ul>
                    <div class="tab-content pt-2" id="borderedTabJustifiedContent">
                        <div class="tab-pane fade show active" id="bordered-justified-home" role="tabpanel" aria-labelledby="customerlist-tab">

                            <div class="pagetitle">

                            </div>
                            <!-- <section class="section"> -->
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="row">
                                                <!-- <h5 class="card-title" style="padding-left: 10px;"></h5>
                                                <div class="col-md-2">
                                                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#largeModal" style="margin-left:900px; margin-top:-63.5px;"> Receipt </button>
                                                </div> -->
                                                <h2></h2>
                                                <br>
                                            </div>


                                            <div class="row" style="padding-bottom: 8px !important;">
                                                <div class="col-md-2"> <label for="inputName5" class="form-label">  <b>Route</b></label>
                                                    <select ngModel name="collectionEmployee" [(ngModel)]="routeValue" class="form-control">
                                                    
                                                        <option [selected]="true" [ngValue]="recptselectvalue">---Select---</option>
                                                    <option value="All">All</option>
                                                    <option *ngFor="let routeData of listofroutedata" [ngValue]="routeData._id">{{routeData._id}}</option>
                                                    </select>

                                                </div>
                                                <div class="col-md-2"> <label for="inputName5" class="form-label">  <b>Type</b></label>
                                                    <select ngModel name="collectionEmployee" [(ngModel)]="recptype" class="form-control">
                                                    
                                                        <option [selected]="true" [ngValue]="recptselectvalue">---Select---</option>
                                                    <option value="All">All</option>
                                                    <option value="DocumentFee">DocumentFee</option>
                                                    <option value="RFAmount">RFAmount</option>
                                                    <option value="Normal">Normal</option>
                                                    <option value="Advance">Advance</option>
                                                    </select>

                                                </div>
                                                <div class="col-md-2">
                                                    <label for="inputName5" class="form-label">  <b>Bill Date</b></label>
                                                    <input type="date" class="form-control" [(ngModel)]="recpdate" maxlength="200" />
                                                </div>
                                                <div class="col-md-2">
                                                    <button type="button" style="margin-top:32px;" class="btn btn-primary" data-bs-dismiss="modal" (click)="searchFilter(routeValue,recptype,recpdate)">Search</button>
                                                </div>

                                            </div>

                                            <div class="modal fade" id="largeModal" tabindex="-1">
                                                <div class="modal-dialog modal-lg">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title">Bill </h5>
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        <!-- <div class="modal-body">
                                                            <form class="row g-3" #recieptForm="ngForm" (ngSubmit)="getrecieptFormData(recieptForm.value)">
                                                                <div class="col-md-6"> <label for="inputName5" class="form-label"> Branch Name</label>
                                                                    <select ngModel name="branchName" class="form-control">
                                                <option value="" disable selected hidden>---Select----</option>
                                                <option *ngFor="let branchData of ListOfBranchData"   >
                                                  {{ branchData.officeName}}
                                             </option>
                                             </select>
                                                                </div>
                                                                <div class="col-md-6"> <label for="inputName5" class="form-label"> Select Group</label>
                                                                    <select ngModel name="selectEnrollment" class="form-control">
                                            <option value="" disable selected hidden>---Select----</option>
                                            <option *ngFor="let grpData of ListOfGroupData" [ngValue]="{groupid:  grpData._id, gropName: grpData.groupName}">
                                               {{grpData.groupName}}
                                            </option>
                                         </select>
                                                                </div>
                                                                <div class="col-md-6"> <label for="inputName5" class="form-label">Receipt ID</label> <input type="text" class="form-control" ngModel name="receiptId" id="inputName5"></div>
                                                                <div class="col-md-6"> <label for="inputName5" class="form-label">Receipt Date</label> <input type="date" class="form-control" ngModel name="receiptDate" id="inputName5"></div>
                                                                <div class="col-md-6"> <label for="inputName5" class="form-label">  Collection Employee</label>
                                                                    <select ngModel name="collectionEmployee" class="form-control">
                                             <option value="" disable selected hidden>---Select----</option>
                                             <option *ngFor="let empData of ListOfEmpData" [ngValue]="{empId:  empData._id, empName: empData.first_name}">
                                               {{empData.first_name}}
                                            </option>
                                          </select>
                                                                </div>
                                                                
                                                                <div class="col-md-6"> <label for="inputName5" class="form-label"> Customer Name</label>
                                                                    <select ngModel name="customerName" class="form-control">
                                             <option value="" disable selected hidden>---Select----</option>
                                             <option *ngFor="let cusData of ListOfCustomerData" [ngValue]="{cusId:  cusData._id, cusName: cusData.personalDetails.name, collectroute: cusData.customerChitDetails[0].collection_route}">
                                               {{cusData.personalDetails.name}}
                                            </option>
                                             
                                          </select>
                                                                </div>

                                                                <div class="col-md-6"> <label for="inputName5" class="form-label"> Receipt Type</label>
                                                                    <select ngModel name="receiptType" class="form-control">
                                             <option value="" disable selected hidden>---Select----</option>
                                             <option value="Document Fee">Document Fee</option>
                                             <option value="RF Amount">RF Amount</option>
                                             <option value="Normal">Normal</option>
                                             <option value="Advance">Advance</option>
                                          </select>
                                                                </div>
                                                                <div class="col-md-6">
                                                                    <label for="inputName5" class="form-label"> Amount </label>
                                                                    <div class="input-group mb-3 w-50"><span class="input-group-text">₹</span> <input type="number" ngModel name="billAmount" class="form-control" aria-label="Amount (to the nearest rupees)"> <span class="input-group-text">.00</span></div>
                                                                </div>
                                                                <div class="col-md-6"> <label for="inputName5" class="form-label"> Payment Mode</label>
                                                                    <select ngModel name="paymentMode" class="form-control">
                                            <option value="" disable selected hidden>---Select----</option>
                                            <option value="Document Fee">Cash</option>
                                            <option value="RF Amount">Credit Card</option>
                                            <option value="Normal">Debit Card</option>
                                            <option value="Normal">Cheque</option>
                                            <option value="Advance">UPI payment method</option>
                                         </select>
                                                                </div>
                                                                <div class="text-center"> <button type="submit" class="btn btn-primary">&nbsp; Submit</button>&nbsp; <button type="reset" class="btn btn-secondary">Reset</button></div>
                                                               
                                                            </form>
                                                        </div> -->

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="d-flex " style="justify-content: right !important;">
                                                <pagination-controls (pageChange)="changePage($event)"></pagination-controls>
                                            </div>
                                            <table class="table table-striped">

                                                <thead>
                                                    <tr>
                                                        <th> Id</th>
                                                        <th>Branch Name</th>
                                                        <th> Date</th>
                                                        <th>Customer</th>
                                                        <th>Employee </th>
                                                        <th>Enrollment </th>
                                                        <th>Receipt </th>
                                                        <th> Amount</th>
                                                        <th> Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let receipt of ListOfReceiptData | paginate: {  itemsPerPage: 10,
                                                        currentPage: pageNumber,
                                                        totalItems: totalReceipt };let i = index">
                                                        <td>{{ receipt.receiptId }}</td>
                                                        <td>{{ receipt.branchName }}</td>
                                                        <td>{{ receipt.receiptDate }}</td>
                                                        <td>{{ receipt.customerName }}</td>
                                                        <td>{{ receipt.collectionEmployee }}</td>
                                                        <td>{{ receipt.selectEnrollment }}</td>
                                                        <td>{{ receipt.receiptType }}</td>
                                                        <td>{{ receipt.billAmount }}</td>
                                                        <td>
                                                            <div class="icon">
                                                                <i class="bi bi-pencil" data-bs-toggle="modal" data-bs-target="#EditReceipt" (click)="getReceiptDetailsbyId(receipt._id)"></i>&nbsp;
                                                                <i class="bi bi-printer"></i>&nbsp;
                                                                <i class="ri-delete-bin-line" (click)="deleteReceipt(receipt._id)"></i>&nbsp;
                                                            </div>
                                                                
                                                        </td>

                                                    </tr>
                                                </tbody>
                                            </table>

                                            <div class="d-flex " style="justify-content: right !important;">
                                                <pagination-controls (pageChange)="changePage($event)"></pagination-controls>
                                            </div>


                                            <div class="modal fade" id="EditReceipt" tabindex="-1">
                                                <div class="modal-dialog modal-xl">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title">Receipt Edit</h5>
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        <div class="modal-body">

                                                            <form class="row g-3" #receiptForm="ngForm" (ngSubmit)="updateReceipt(ReceiptDetailsbyId)">
                                                                <div class="col-md-3"> <label for="inputName5" class="form-label"> Receipt ID</label>
                                                                    <input type="text" class="form-control" ngModel name="receiptId" id="inputName5" [(ngModel)]="ReceiptDetailsbyId.receiptId" readonly>
                                                                </div>
                                                                <div class="col-md-3"> <label for="inputName5" class="form-label"> Branch Name</label>
                                                                    <input type="text" class="form-control" ngModel name="branchName" id="inputName5" [(ngModel)]="ReceiptDetailsbyId.branchName">
                                                                </div>
                                                                <div class="col-md-3"> <label for="inputName5" class="form-label"> Receipt Date</label>
                                                                    <input type="date" class="form-control" ngModel name="receiptDate" id="inputName5" [(ngModel)]="ReceiptDetailsbyId.receiptDate" readonly>
                                                                </div>
                                                                <div class="col-md-3"> <label for="inputName5" class="form-label">Collection Employee</label>
                                                                    <input type="text" class="form-control" ngModel name="collectionEmployee" id="inputName5" [(ngModel)]="ReceiptDetailsbyId.collectionEmployee">
                                                                </div>
                                                                <div class="col-md-3"> <label for="inputName5" class="form-label"> Customer Name</label>
                                                                    <input type="text" class="form-control" ngModel name="customerName" id="inputName5" [(ngModel)]="ReceiptDetailsbyId.customerName">
                                                                </div>
                                                                <div class="col-md-3"> <label for="inputName5" class="form-label">Enrollment</label>
                                                                    <input type="text" class="form-control" ngModel name="selectEnrollment" id="inputName5" [(ngModel)]="ReceiptDetailsbyId.selectEnrollment">
                                                                </div>
                                                                <div class="col-md-3"> <label for="inputName5" class="form-label"> Receipt Type</label>
                                                                    <input type="text" class="form-control" ngModel name="receiptType" id="inputName5" [(ngModel)]="ReceiptDetailsbyId.receiptType">
                                                                </div>
                                                                <div class="col-md-3"> <label for="inputName5" class="form-label"> Bill Amount</label>
                                                                    <input type="text" class="form-control" ngModel name="billAmount" id="inputName5" [(ngModel)]="ReceiptDetailsbyId.billAmount">
                                                                </div>
                                                                <div class="col-md-3"> <label for="inputName5" class="form-label"> Collection Route</label>
                                                                    <input type="text" class="form-control" ngModel name="collectionRoute" id="inputName5" [(ngModel)]="ReceiptDetailsbyId.collectionRoute">
                                                                </div>
                                                                <div class="col-md-3"> <label for="inputName5" class="form-label"> Payment Mode</label>
                                                                    <input type="text" class="form-control" ngModel name="paymentMode" id="inputName5" [(ngModel)]="ReceiptDetailsbyId.paymentMode">
                                                                </div>
                                                                <div class="col-md-3"> <label for="inputName5" class="form-label"> Ticket Number</label>
                                                                    <input type="text" class="form-control" ngModel name="ticketNumber" id="inputName5" [(ngModel)]="ReceiptDetailsbyId.ticketNumber">
                                                                </div>
                                                               
                                                                <div class="modal-footer"><button type="submit" class="btn btn-primary">&nbsp; Update</button>&nbsp;
                                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close
                                                                     </button>
                                                                </div>

                                                            </form>

                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>





                        <div class="tab-pane fade" id="bordered-justified-profile" role="tabpanel" aria-labelledby="customercreation-tab">
                            <div class="row">
                                <div class="col-lg-15">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title"></h5>



                                            <!-- <div class="col-md-6" *ngIf="this.recprelpop"> <label for="inputName5" class="form-label">Receipt ID</label> <input type="text" class="form-control" ngModel name="receiptId" id="inputName5"></div> -->




                                            <!-- form based on group -->

                                            <!-- <form class="row g-3" #recieptForm="ngForm" (ngSubmit)="getrecieptFormData(recieptForm.value)"> -->
                                            <!-- <h5>Please enter the below deatils</h5> -->

                                            <!-- <div class="row">
                                                    <div class="col-md-5"> <label for="inputName5" class="form-label"> Group Name</label>
                                                        <select ngModel name="selectEnrollmentval" class="form-control" [(ngModel)]="selectEnrollmentval">
                              <option value="" disable selected hidden>---Select----</option>
                              <option value="None" >None</option>
                              <option *ngFor="let grpData of ListOfGroupData" [ngValue]="{ groupId: grpData._id, groupName: grpData.groupName}">
                               
                                 {{grpData.groupName}}
                              </option>
                           </select>
                                                    </div>
                                                    <div class="col-md-4" style="padding-top: 30px;">
                                                        <button class="btn btn-primary" (click)="recepitcreation(selectEnrollmentval)">Next</button>
                                                    </div>
                                                </div> -->


                                            <!------------------------------------------------------------------------------------------------------------->



                                            <div class="modal-body">
                                                <form class="row g-3" #recieptForm="ngForm" (ngSubmit)="getrecieptFormData(recieptForm.value)">
                                                    <div class="row">
                                                        <div class="col-md-6"> <label for="inputName5" class="form-label"> Select Group</label>
                                                            <select [(ngModel)]="grpidvalue" name="selectEnrollment" class="form-control">
                                                                <option [selected]="true" [ngValue]="recptselectvalue">---Select---</option>
                                <!-- <option value="none" >None</option> -->
                                <option *ngFor="let grpData of ListOfGroupData" [ngValue]="{groupid:  grpData._id, gropName: grpData.groupName}">
                                   {{grpData.groupName}}
                                </option>
                             </select>
                                                        </div>
                                                        <div class="col-md-6" style="padding-top: 30px;">
                                                            <button class="btn btn-primary" (click)="recpdetailsbygrpid(grpidvalue.groupid)">&nbsp;Next</button>
                                                        </div>
                                                    </div>

                                                    <div class="row" style="padding-top: 30px;" *ngIf="recprelpop">
                                                        <p>---------------------------------------------------------------------</p>
                                                        <div class="col-md-6"> <label for="inputName5" class="form-label"> Branch Name</label>
                                                            <select ngModel name="branchName" class="form-control">
                                    <option value="" disable selected hidden>---Select----</option>
                                    <option *ngFor="let branchData of ListOfBranchData"   >
                                      {{ branchData.officeName}}
                                 </option>
                                 </select>
                                                        </div>

                                                        <div class="col-md-6"> <label for="inputName5" class="form-label">Receipt ID</label> <input type="text" class="form-control" ngModel name="receiptId" id="inputName5"></div>
                                                        <div class="col-md-6"> <label for="inputName5" class="form-label">Receipt Date</label> <input type="date" class="form-control" ngModel name="receiptDate" id="inputName5"></div>
                                                        <div class="col-md-6"> <label for="inputName5" class="form-label">  Collection Employee</label>
                                                            <select ngModel name="collectionEmployee" class="form-control">
                                 <option value="" disable selected hidden>---Select----</option>
                                 <option *ngFor="let empData of ListOfEmpData" [ngValue]="{empId:  empData._id, empName: empData.first_name}">
                                   {{empData.first_name}}
                                </option>
                              </select>
                                                        </div>
                                                        <!-- <div class="col-md-6"> <label for="inputName5" class="form-label">Customer ID</label> <input type="text" class="form-control" ngModel name="receiptId" id="inputName5"></div> -->
                                                        <div class="col-md-6"> <label for="inputName5" class="form-label"> Customer Name</label>
                                                            <select ngModel name="customerName" class="form-control">
                                 <option value="" disable selected hidden>---Select----</option>
                                 <option *ngFor="let cusData of ReceiptDetailsbyId" [ngValue]="{cusId:  cusData.customerId, cusName: cusData.customerName, collectroute: cusData.collection_route , custicket : cusData.ticketNumber}">
                                   {{cusData.customerName}} - {{cusData.ticketNumber}}
                                </option>
                                 
                              </select>
                                                        </div>

                                                        <div class="col-md-6"> <label for="inputName5" class="form-label"> Receipt Type</label>
                                                            <select ngModel name="receiptType" class="form-control">
                                 <option value="" disable selected hidden>---Select----</option>
                                 <option value="DocumentFee">Document Fee</option>
                                 <option value="RFAmount">RF Amount</option>
                                 <option value="Normal">Normal</option>
                                 <!-- <option value="Advance">Advance</option> -->
                              </select>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <label for="inputName5" class="form-label"> Amount </label>
                                                            <div class="input-group mb-3 w-50"><span class="input-group-text">₹</span> <input type="number" ngModel name="billAmount" class="form-control" aria-label="Amount (to the nearest rupees)"> <span class="input-group-text">.00</span></div>
                                                        </div>
                                                        <div class="col-md-6"> <label for="inputName5" class="form-label"> Payment Mode</label>
                                                            <select ngModel name="paymentMode" class="form-control">
                                <option value="" disable selected hidden>---Select----</option>
                                <option value="Cash">Cash</option>
                                <option value="CreditCard">Credit Card</option>
                                <option value="DebitCard">Debit Card</option>
                                <option value="Cheque">Cheque</option>
                                <option value="UPI">UPI payment method</option>
                             </select>
                                                        </div>
                                                    </div>
                                                    <div class="text-center"> <button type="submit" class="btn btn-primary">&nbsp; Submit</button>&nbsp; <button type="reset" class="btn btn-secondary">Reset</button></div>
                                                    <!-- [disabled]="isLoading" (click)="click()"
                                         <i class="spinner-border" style="width: 20px; height: 20px;"[ngClass]="{'spinner-border': isLoading}"></i> -->
                                                </form>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>





                        </div>
                    </div>
                </div>
            </div>
        </div>




    </section>




</main>